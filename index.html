<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earn Cash Pro</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --p: #00b894; --s: #00cec9; --bg: #dfe6e9; }
        body { font-family: 'Segoe UI', Arial; background: var(--bg); margin: 0; }
        .nav { background: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top:0; z-index:10; }
        .bal-card { background: linear-gradient(135deg, var(--p), var(--s)); color: white; margin: 15px; padding: 25px; border-radius: 20px; text-align: center; box-shadow: 0 10px 20px rgba(0,184,148,0.3); }
        .task-card { background: white; margin: 15px; padding: 20px; border-radius: 20px; text-align: center; border-bottom: 5px solid var(--p); }
        input { width: 85%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 10px; outline: none; }
        .btn { width: 95%; padding: 14px; border: none; border-radius: 12px; background: var(--p); color: white; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .btn:disabled { background: #b2bec3; }
        #auth-page { padding: 20px; margin-top: 50px; }
        .logout-btn { background: #ff7675; margin-top: 20px; width: 50%; }
    </style>
</head>
<body>

<div id="auth-page">
    <div style="background: white; padding: 30px; border-radius: 25px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
        <h2 style="color: var(--p);">Welcome Back</h2>
        <input id="ph" type="number" placeholder="ফোন নম্বর">
        <input id="ps" type="password" placeholder="পাসওয়ার্ড">
        <button class="btn" onclick="login()">প্রবেশ করুন</button>
        <button class="btn" onclick="signup()" style="background:#636e72; margin-top:10px;">একাউন্ট খুলুন</button>
    </div>
</div>

<div id="app-page" style="display:none">
    <div class="nav">
        <b style="color: var(--p); font-size: 20px;"><i class="fas fa-wallet"></i> EarnPro</b>
        <span id="uName" style="color: #636e72;">ইউজার</span>
    </div>

    <div class="bal-card">
        <p style="margin:0; opacity: 0.9;">আপনার মোট ব্যালেন্স</p>
        <h1 id="uBal" style="margin: 10px 0; font-size: 40px;">৳ ০.০০</h1>
    </div>

    <div class="task-card">
        <i class="fas fa-play-circle" style="font-size: 50px; color: var(--p); margin-bottom: 10px;"></i>
        <h3>ভিডিও টাস্ক</h3>
        <p id="timer" style="color: #636e72;">বিজ্ঞাপন দেখে আয় করুন</p>
        <button id="adBtn" class="btn" onclick="watchAd()">টাস্ক শুরু করুন (৳৪.৯০)</button>
    </div>

    <div class="task-card" style="border-bottom-color: #0984e3;">
        <h3>আপনার রেফার কোড</h3>
        <p id="uRef" style="font-size: 22px; color: #0984e3; font-weight: bold; letter-spacing: 2px;">---</p>
        <small>রেফার করে আয় বাড়ান!</small>
    </div>

    <center><button class="btn logout-btn" onclick="logout()">লগআউট</button></center>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAdF9umElHCNQcclyWRkKVFXyNSqXS3FIM",
        authDomain: "free-income-48f88.firebaseapp.com",
        projectId: "free-income-48f88",
        databaseURL: "https://free-income-48f88-default-rtdb.firebaseio.com/",
        appId: "1:559465076876:web:93d3aa1f898d062053c3a9"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function signup() {
        let p = document.getElementById('ph').value, s = document.getElementById('ps').value;
        if(p.length >= 11 && s.length >= 6) {
            db.ref('users/'+p).set({name: "User-"+p.slice(-4), pass: s, balance: 0}).then(()=>alert("সফল!"));
        } else alert("সঠিক তথ্য দিন!");
    }

    function login() {
        let p = document.getElementById('ph').value, s = document.getElementById('ps').value;
        db.ref('users/'+p).once('value', snap => {
            if(snap.exists() && snap.val().pass == s) {
                localStorage.setItem('user', p);
                location.reload();
            } else alert("ভুল নম্বর বা পাসওয়ার্ড!");
        });
    }

    let user = localStorage.getItem('user');
    if(user) {
        document.getElementById('auth-page').style.display = 'none';
        document.getElementById('app-page').style.display = 'block';
        document.getElementById('uRef').innerText = user;
        db.ref('users/'+user).on('value', snap => {
            let d = snap.val();
            if(d) {
                document.getElementById('uName').innerText = d.name;
                document.getElementById('uBal').innerText = "৳ " + d.balance.toFixed(2);
            }
        });
    }

    function watchAd() {
        window.open("https://www.effectivegatecpm.com/w6arakqmr0?key=cfe5b3bf60645ca848c57f56fdc4be23", "_blank");
        let btn = document.getElementById('adBtn'), tText = document.getElementById('timer');
        btn.disabled = true;
        let count = 7;
        let itv = setInterval(() => {
            count--;
            tText.innerText = "অপেক্ষা করুন: " + count + "s";
            if(count <= 0) {
                clearInterval(itv);
                tText.innerText = "টাকা যোগ হচ্ছে...";
                db.ref('users/'+user).once('value', snap => {
                    let newBal = (snap.val().balance || 0) + 4.90;
                    db.ref('users/'+user).update({balance: newBal}).then(() => {
                        alert("৳৪.৯০ যোগ হয়েছে!");
                        btn.disabled = false;
                        tText.innerText = "বিজ্ঞাপন দেখে আয় করুন";
                    });
                });
            }
        }, 1000);
    }
    function logout() { localStorage.clear(); location.reload(); }
</script>
</body>
</html>
